import{j as a}from"./mui-vendor-CJVoYIqO.js";import{u as j,B as x}from"./index-B8NK1d9-.js";const P=({error:e,onRetry:t,title:s,message:n})=>{const{t:o}=j(),h=o.errorDisplay.title,c=o.errorDisplay.message;return e instanceof Error?e.message:o.errorDisplay.unknown,a.jsx("div",{className:"error-display",children:a.jsxs("div",{className:"error-display__content",children:[a.jsx("h2",{className:"error-display__title",children:s??h}),a.jsx("p",{className:"error-display__message",children:n??c}),!1,t&&a.jsx(x,{onClick:t,variant:"primary",children:o.errorDisplay.retry})]})})};class i extends Error{constructor(t,s,n){super(t),this.status=s,this.path=n,this.name="ApiError",Object.setPrototypeOf(this,i.prototype)}}class f extends Error{constructor(t,s){super(t),this.originalError=s,this.name="NetworkError",Object.setPrototypeOf(this,f.prototype)}}class u extends Error{constructor(t,s){super(t),this.originalError=s,this.name="ParseError",Object.setPrototypeOf(this,u.prototype)}}class m extends Error{constructor(t="Request timeout"){super(t),this.name="TimeoutError",Object.setPrototypeOf(this,m.prototype)}}const T=1e4;async function b(e){return new Promise(t=>setTimeout(t,e))}async function O(e,t){const s=new AbortController,n=setTimeout(()=>s.abort(),t);try{const o=await fetch(e,{signal:s.signal});return clearTimeout(n),o}catch(o){throw clearTimeout(n),o instanceof Error&&o.name==="AbortError"?new m(`Request to ${e} timed out after ${t}ms`):o}}async function A(e,t={}){var w,y;const{timeout:s=T,retries:n=0,retryDelay:o=1e3}=t,h=/^https?:\/\//i.test(e),c=((y=(w=import.meta)==null?void 0:w.env)==null?void 0:y.BASE_URL)||"/",g=typeof window<"u"?new URL(c,window.location.origin).toString():c,l=h?e:new URL(e.replace(/^\//,""),g).toString();let d;for(let p=0;p<=n;p++)try{const r=await O(l,s);if(!r.ok)throw new i(`Failed to fetch ${l}: ${r.status}`,r.status,l);try{return await r.json()}catch(E){throw new u(`Failed to parse JSON from ${l}`,E)}}catch(r){if(d=r,r instanceof i&&r.status>=400&&r.status<500)throw r;if(p===n)throw r instanceof i||r instanceof u?r:new f(`Network error while fetching ${e}`,r);await b(o*(p+1))}throw d}export{P as E,A as f};

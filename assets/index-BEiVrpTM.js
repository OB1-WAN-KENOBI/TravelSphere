import{j as e,i as T}from"./mui-vendor-CJVoYIqO.js";import{r as n,i as j,d as M,e as _}from"./react-vendor-Bu_lqQYS.js";import{o as v,u as b,t as y,s as c}from"./types-DRgC_uQm.js";import{u as h,I as m,B as g}from"./index-CxY7izXh.js";import{C as N}from"./Card-CRJSVTL8.js";import{u as S,T as P}from"./formatPrice-C2fwhGPV.js";import"./query-vendor-DRD9acJ6.js";import"./mapbox-vendor-mpGaPtGQ.js";const D=s=>v({name:c().min(2,s.nameMin),email:c().email(s.email),phone:c().min(10,s.phoneMin),birthDate:c().optional()});function w(){var x,d,u;const{t:s}=h(),i=n.useMemo(()=>D(s.profile.validation),[s]),{register:a,handleSubmit:l,formState:{errors:r}}=b({resolver:y(i),defaultValues:{name:"Иван Иванов",email:"ivan@example.com",phone:"+7 (999) 123-45-67"}}),[o,t]=n.useState(null),f=p=>{t(s.profile.success)};return n.useEffect(()=>{if(!o)return;const p=setTimeout(()=>t(null),4e3);return()=>clearTimeout(p)},[o]),e.jsxs(N,{children:[e.jsx("h2",{className:"profile-info__title",children:s.profile.title}),e.jsxs("form",{onSubmit:l(f),className:"profile-info__form",children:[e.jsx(m,{label:s.profile.fields.name,...a("name"),error:!!r.name,helperText:(x=r.name)==null?void 0:x.message,fullWidth:!0}),e.jsx(m,{label:"Email",type:"email",...a("email"),error:!!r.email,helperText:(d=r.email)==null?void 0:d.message,fullWidth:!0}),e.jsx(m,{label:s.profile.fields.phone,type:"tel",...a("phone"),error:!!r.phone,helperText:(u=r.phone)==null?void 0:u.message,fullWidth:!0}),e.jsx(m,{label:s.profile.fields.birthDate,type:"date",...a("birthDate"),fullWidth:!0,InputLabelProps:{shrink:!0}}),e.jsx(g,{type:"submit",children:s.profile.submit}),o&&e.jsx("p",{className:"profile-info__success","aria-live":"polite",role:"status",children:o})]})]})}function H(){const{t:s}=h(),{formatPrice:i,locale:a}=S(),l=s.ordersHistory.orders,[r,o]=n.useState(null);return n.useEffect(()=>{if(!r)return;const t=setTimeout(()=>o(null),4e3);return()=>clearTimeout(t)},[r]),e.jsxs("div",{className:"orders-history",children:[e.jsx("h2",{className:"orders-history__title",children:s.ordersHistory.title}),e.jsxs("div",{className:"orders-history__list",children:[l.map(t=>e.jsxs(N,{className:"orders-history__card",children:[e.jsxs("div",{className:"orders-history__header",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"orders-history__tour-title",children:t.tourTitle}),e.jsxs("p",{className:"orders-history__date",children:[s.ordersHistory.date,":"," ",new Date(t.date).toLocaleDateString(a)]})]}),e.jsx(P,{label:t.status==="confirmed"?s.ordersHistory.status.confirmed:s.ordersHistory.status.pending})]}),e.jsxs("div",{className:"orders-history__footer",children:[e.jsx("div",{className:"orders-history__price",children:i(t.price,s.ordersHistory.currency)}),e.jsx(g,{variant:"secondary",onClick:()=>o(`${s.ordersHistory.details}: ${t.tourTitle}`),children:s.ordersHistory.details})]})]},t.id)),r&&e.jsx("p",{className:"orders-history__info","aria-live":"polite",role:"status",children:r})]})]})}function k(){const{t:s}=h(),{locale:i}=S(),a=s.documents.items,[l,r]=n.useState(null),o=t=>{r(s.documents.downloadStub.replace("{{id}}",t))};return n.useEffect(()=>{if(!l)return;const t=setTimeout(()=>r(null),4e3);return()=>clearTimeout(t)},[l]),e.jsxs("div",{className:"documents",children:[e.jsx("h2",{className:"documents__title",children:s.documents.title}),l&&e.jsx("div",{className:"documents__message","aria-live":"polite",role:"status",children:l}),e.jsx("div",{className:"documents__list",children:a.map(t=>e.jsx(N,{className:"documents__card",children:e.jsxs("div",{className:"documents__content",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"documents__doc-title",children:t.title}),e.jsx("p",{className:"documents__doc-date",children:new Date(t.date).toLocaleDateString(i)})]}),e.jsx(g,{variant:"secondary",startIcon:e.jsx(T,{}),onClick:()=>o(t.id),children:s.documents.download})]})},t.id))})]})}const $=s=>v({subject:c().min(3,s.subjectMin),message:c().min(10,s.messageMin)});function E(){var d,u;const{t:s}=h(),i=n.useMemo(()=>$(s.support.validation),[s]),{register:a,handleSubmit:l,formState:{errors:r},reset:o}=b({resolver:y(i)}),[t,f]=n.useState(null),x=p=>{f(s.support.success),o()};return n.useEffect(()=>{if(!t)return;const p=setTimeout(()=>f(null),4e3);return()=>clearTimeout(p)},[t]),e.jsxs("div",{className:"support",children:[e.jsx("h2",{className:"support__title",children:s.support.title}),e.jsxs(N,{className:"support__card",children:[e.jsx("p",{className:"support__description",children:s.support.description}),e.jsxs("form",{onSubmit:l(x),className:"support__form",children:[e.jsx(m,{label:s.support.fields.subject,...a("subject"),error:!!r.subject,helperText:(d=r.subject)==null?void 0:d.message,fullWidth:!0}),e.jsx(m,{label:s.support.fields.message,multiline:!0,rows:6,...a("message"),error:!!r.message,helperText:(u=r.message)==null?void 0:u.message,fullWidth:!0}),e.jsx(g,{type:"submit",children:s.support.submit}),t&&e.jsx("p",{className:"support__success","aria-live":"polite",role:"status",children:t})]})]})]})}function V(){const{t:s}=h();return e.jsx("div",{className:"profile-page",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"profile-page__title",children:s.profilePage.title}),e.jsxs("div",{className:"profile-page__content",children:[e.jsx("aside",{className:"profile-page__sidebar",children:e.jsxs("nav",{className:"profile-page__nav",children:[e.jsx(j,{to:"/profile",end:!0,className:({isActive:i})=>`profile-page__nav-link ${i?"active":""}`,children:s.profilePage.nav.profile}),e.jsx(j,{to:"/profile/orders",className:({isActive:i})=>`profile-page__nav-link ${i?"active":""}`,children:s.profilePage.nav.orders}),e.jsx(j,{to:"/profile/documents",className:({isActive:i})=>`profile-page__nav-link ${i?"active":""}`,children:s.profilePage.nav.documents}),e.jsx(j,{to:"/profile/support",className:({isActive:i})=>`profile-page__nav-link ${i?"active":""}`,children:s.profilePage.nav.support})]})}),e.jsx("main",{className:"profile-page__main",children:e.jsxs(M,{children:[e.jsx(_,{index:!0,element:e.jsx(w,{})}),e.jsx(_,{path:"orders",element:e.jsx(H,{})}),e.jsx(_,{path:"documents",element:e.jsx(k,{})}),e.jsx(_,{path:"support",element:e.jsx(E,{})})]})})]})]})})}export{V as ProfilePage};

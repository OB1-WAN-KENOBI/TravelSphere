import{j as n}from"./mui-vendor-CLtSI9R1.js";import{u as d,B as w}from"./index-p_fKfQYs.js";const b=({error:r,onRetry:t,title:s,message:a})=>{const{t:o}=d(),f=o.errorDisplay.title,i=o.errorDisplay.message;return r instanceof Error?r.message:o.errorDisplay.unknown,n.jsx("div",{className:"error-display",children:n.jsxs("div",{className:"error-display__content",children:[n.jsx("h2",{className:"error-display__title",children:s??f}),n.jsx("p",{className:"error-display__message",children:a??i}),!1,t&&n.jsx(w,{onClick:t,variant:"primary",children:o.errorDisplay.retry})]})})};class c extends Error{constructor(t,s,a){super(t),this.status=s,this.path=a,this.name="ApiError",Object.setPrototypeOf(this,c.prototype)}}class h extends Error{constructor(t,s){super(t),this.originalError=s,this.name="NetworkError",Object.setPrototypeOf(this,h.prototype)}}class u extends Error{constructor(t,s){super(t),this.originalError=s,this.name="ParseError",Object.setPrototypeOf(this,u.prototype)}}class p extends Error{constructor(t="Request timeout"){super(t),this.name="TimeoutError",Object.setPrototypeOf(this,p.prototype)}}const E=1e4;async function j(r){return new Promise(t=>setTimeout(t,r))}async function x(r,t){const s=new AbortController,a=setTimeout(()=>s.abort(),t);try{const o=await fetch(r,{signal:s.signal});return clearTimeout(a),o}catch(o){throw clearTimeout(a),o instanceof Error&&o.name==="AbortError"?new p(`Request to ${r} timed out after ${t}ms`):o}}async function g(r,t={}){const{timeout:s=E,retries:a=0,retryDelay:o=1e3}=t,i=/^https?:\/\//i.test(r)||r.startsWith("/")?r:`/${r}`;let m;for(let l=0;l<=a;l++)try{const e=await x(i,s);if(!e.ok)throw new c(`Failed to fetch ${i}: ${e.status}`,e.status,i);try{return await e.json()}catch(y){throw new u(`Failed to parse JSON from ${i}`,y)}}catch(e){if(m=e,e instanceof c&&e.status>=400&&e.status<500)throw e;if(l===a)throw e instanceof c||e instanceof u?e:new h(`Network error while fetching ${r}`,e);await j(o*(l+1))}throw m}export{b as E,g as f};
